# Insights v2 Implementation Report

## üéØ –ü—Ä–æ–µ–∫—Ç: –ê–ø–≥—Ä–µ–π–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã Insights —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é

**–î–∞—Ç–∞:** 27 —è–Ω–≤–∞—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω (–≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ 1. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ò–∑—É—á–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ API endpoints
- –í—ã—è–≤–ª–µ–Ω—ã —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### ‚úÖ 2. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
–°–æ–∑–¥–∞–Ω–∞ **2-—à–∞–≥–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞** —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó:

**–®–∞–≥ A ‚Äî insights_prepare** (–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ):
- –†–∞—Å—Å—á–µ—Ç –≤—Å–µ—Ö —á–∏—Å–µ–ª –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫
- –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç LLM
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–®–∞–≥ B ‚Äî insights_enrich_llm** (LLM Llama-3.1-8B):
- –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏–Ω—Å–∞–π—Ç–æ–≤
- –°—Ç—Ä–æ–≥–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è JSON —Å—Ö–µ–º
- Repair-retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

### ‚úÖ 3. Backend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### üìÅ `backend/app/schemas/insights_v2.py`
- **PositionPrepared**: –¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–π –¥–ª—è LLM –∏ UI
- **PortfolioSummary**: —Å–≤–æ–¥–Ω—ã–µ KPI –ø–æ—Ä—Ç—Ñ–µ–ª—è  
- **GroupingData**: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ø–æ –∏–Ω–¥—É—Å—Ç—Ä–∏—è–º/—Ä–∏—Å–∫—É/—Ä–æ—Å—Ç—É
- **LLMInsightsResponse**: —Å—Ç—Ä–æ–≥–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ LLM
- **InsightsV2Response**: —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è UI

#### üìÅ `backend/app/services/insights_prepare.py`
- **InsightsPrepareService**: –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **IndustryData**: –º–∞–ø–ø–∏–Ω–≥ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **MetricsCalculator**: —Ä–∞—Å—á–µ—Ç —Ä–∏—Å–∫–æ–≤, –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ —Ä–æ—Å—Ç–∞, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
- **GroupingsCalculator**: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ (¬±5% –ø–æ—Ä–æ–≥ —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó)

#### üìÅ `backend/app/services/insights_enrich_llm.py`  
- **InsightsEnrichLLMService**: –æ–±–æ–≥–∞—â–µ–Ω–∏–µ LLM —Å Llama-3.1-8B
- **LLMSchemaBuilder**: —Å—Ç—Ä–æ–≥–∏–µ JSON —Å—Ö–µ–º—ã –¥–ª—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã 0.2
- **LLMPromptBuilder**: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π 8B
- **LLMValidator**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∏ repair-retry –ª–æ–≥–∏–∫–∞
- Graceful degradation –ø—Ä–∏ —Å–±–æ—è—Ö LLM

#### üìÅ `backend/app/routers/insights_v2.py`
- `/insights/v2/analyze` - –æ—Å–Ω–æ–≤–Ω–æ–π endpoint —Å –ø–æ–ª–Ω—ã–º –ø–∞–π–ø–ª–∞–π–Ω–æ–º
- `/insights/v2/prepared-only` - —Ç–æ–ª—å–∫–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (fallback)
- `/insights/v2/health` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–∏—Å–∞
- `/insights/v2/mock-data/{scenario}` - —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã

#### üìÅ `backend/app/main.py`
- –ü–æ–¥–∫–ª—é—á–µ–Ω –Ω–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä `insights_v2`

### ‚úÖ 4. Frontend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### üìÅ `frontend/src/types/insightsV2.ts`
- –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –±—ç–∫–µ–Ω–¥ —Å—Ö–µ–º–∞–º
- –¢–∏–ø—ã –¥–ª—è 2-—à–∞–≥–æ–≤–æ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞
- –£—Ç–∏–ª–∏—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- Computed properties –¥–ª—è UI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–π
- –ü–æ—Ä–æ–≥–∏ —Ä–∏—Å–∫–æ–≤ –∏ —Ä–æ—Å—Ç–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó

#### üìÅ `frontend/src/lib/api-insights.ts`
- **InsightsV2API**: –∫–ª–∏–µ–Ω—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ prepared-only –ø—Ä–∏ —Å–±–æ—è—Ö LLM
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –¢–ó
- –†–µ—Ç—Ä–∞–π-–ª–æ–≥–∏–∫–∞ –¥–ª—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤

#### üìÅ `frontend/src/pages/InsightsV2.tsx` 
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: —á–∏—Å–ª–∞ –∏–∑ PreparedData, —Ç–µ–∫—Å—Ç—ã –∏–∑ LLM
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π Data gap –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ LLM –∏–Ω—Å–∞–π—Ç–æ–≤
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä escalation_rate –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å LLM
- Responsive –¥–∏–∑–∞–π–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

#### üìÅ `frontend/src/components/insights/AnalysisControls.tsx`
- –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `InsightsV2Request`

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã (—Å–æ–±–ª—é–¥–µ–Ω—ã)

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ ‚úÖ
- **–ë—ç–∫–µ–Ω–¥**: –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞, —á–∏—Å–ª–∞, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- **LLM**: —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **UI**: –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö + –ª–æ–∫–∞–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –±–µ–π–¥–∂–µ–π

### –°—Ç—Ä–æ–≥–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- **–°—Ö–µ–º–∞ 3.1**: –∑–∞–ø—Ä–æ—Å –∫ LLM —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–°—Ö–µ–º–∞ 3.2**: –æ—Ç–≤–µ—Ç LLM —Ç–æ–ª—å–∫–æ —Å —Ç–µ–∫—Å—Ç–∞–º–∏
- **–°—Ö–µ–º–∞ 3.3**: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è UI –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å ‚úÖ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ –≤—Ö–æ–¥‚Üí–≤—ã—Ö–æ–¥ 
- –í–∞–ª–∏–¥–∞—Ü–∏—è enum –∑–Ω–∞—á–µ–Ω–∏–π (action, valuation, momentum, quality)
- Repair-retry –¥–ª—è Llama-3.1-8B –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º JSON
- Graceful degradation –±–µ–∑ –∫—Ä–∞—à–µ–π UI

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚úÖ
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ LLM –∑–∞–ø—Ä–æ—Å–∞ ‚â§ 400 —Ç–æ–∫–µ–Ω–æ–≤
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.2 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- –¶–µ–ª–µ–≤–æ–π escalation_rate ‚â§ 5%
- –ù–µ—Ç —É—Ö—É–¥—à–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–Ω–¥–µ—Ä–∞ > +150ms

---

## üß™ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø–æ—Ä–æ–≥–∏ (UI –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã)

### Risk Classification ‚úÖ
- **Low**: 0-33 
- **Moderate**: 34-66
- **High**: 67-100

### Growth Categories ‚úÖ  
- **High**: ‚â•15%
- **Mid**: 5-<15% 
- **Low**: <5% –∏–ª–∏ null

UI –≤—ã—á–∏—Å–ª—è–µ—Ç –±–µ–π–¥–∂–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ —ç—Ç–∏–º –ø–æ—Ä–æ–≥–∞–º.

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

### ‚úÖ –ü—Ä–∏–µ–º—É—â–µ—Å—Ç–≤–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
- [x] –ó–∞–ø—Ä–æ—Å –≤ LLM —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ö–µ–º–µ **3.1**, –±–µ–∑ –ª–∏—à–Ω–∏—Ö —á–∏—Å–µ–ª/PII
- [x] –û—Ç–≤–µ—Ç LLM ‚Äî –≤–∞–ª–∏–¥–Ω—ã–π JSON –ø–æ —Å—Ö–µ–º–µ **3.2**, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –º–Ω–æ–∂–µ—Å—Ç–≤–∞—Ö
- [x] UI —á–∏—Ç–∞–µ—Ç KPI/–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ç–æ–ª—å–∫–æ –∏–∑ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] –ë–µ–π–¥–∂–∏ Risk/Growth –≤ UI —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø–æ—Ä–æ–≥–∞–º–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 4
- [x] –ü—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º –æ—Ç–≤–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è repair-retry, –∑–∞—Ç–µ–º graceful degradation
- [x] –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ —É—Ö—É–¥—à–µ–Ω–æ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ +150 –º—Å

### ‚úÖ –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã (–≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é)
- [x] **Missing insight**: UI –ø–æ–º–µ—á–∞–µ—Ç **Data gap**
- [x] **Wrong enum**: –≤–∞–ª–∏–¥–∞—Ç–æ—Ä —Ä–µ–∂–µ—Ç, retry, –∑–∞—Ç–µ–º graceful degradation
- [x] **Long thesis**: >240 —Å–∏–º–≤–æ–ª–æ–≤ —Ä–µ–∂–µ—Ç—Å—è/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è
- [x] **Weight drift**: –ª–æ–∫–∞–ª—å–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è + callout ¬´–ù–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ¬ª
- [x] **Version mismatch**: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–µ—Ä–¥–∂–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–ø—É—Å–∫—É

### Backend –≥–æ—Ç–æ–≤ ‚úÖ
- –ù–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ `main.py`
- –°—Ö–µ–º—ã Pydantic –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

### Frontend –≥–æ—Ç–æ–≤ ‚úÖ  
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤
- API –∫–ª–∏–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- Error handling —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó
- Responsive –¥–∏–∑–∞–π–Ω —Å–æ—Ö—Ä–∞–Ω–µ–Ω

### LLM –≥–æ—Ç–æ–≤ ‚úÖ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Ollama —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- –°—Ö–µ–º—ã JSON –¥–ª—è Llama-3.1-8B –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- Temperature 0.2 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- Repair-retry –ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

---

## üîÑ –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å backend —Å Ollama**:
   ```bash
   cd backend
   python -m uvicorn app.main:app --reload
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å frontend**:  
   ```bash
   cd frontend
   npm run dev
   ```

3. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Insights v2**:
   ```
   http://localhost:5173/insights-v2
   ```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ endpoints:
- `POST /insights/v2/analyze` - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- `GET /insights/v2/prepared-only` - —Ç–æ–ª—å–∫–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- `GET /insights/v2/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–∞

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Insights v2 –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤** —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é! 

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π:
- –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –±—ç–∫–µ–Ω–¥–µ ‚úÖ
- LLM (Llama-3.1-8B) —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏–Ω—Å–∞–π—Ç–æ–≤ ‚úÖ  
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ repair-retry —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó ‚úÖ
- UI —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ responsive –¥–∏–∑–∞–π–Ω ‚úÖ

–í—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –ø—É–Ω–∫—Ç—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ.
